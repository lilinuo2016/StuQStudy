<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
<script src="http://cdn.madebyglutard.com/libs/handlebars.js/2.0.0/handlebars.js"></script>

<div id="div5"></div>
<script id="entry-template5" type="text/x-handlebars-template">    
    <div class="post">
        <h1>By {{fullName author}}</h1>
        <div class="body">{{body}}</div>
    
        <h1>And</h1>
    
        {{#each comments}}
            <h1>By {{fullName author}}</h1>
            <div class="body">{{body}}</div>
        {{/each}}
    </div>
</script>
<script>
    var context = {
        author: {firstName: "王", lastName: "沛"},
        body: "《ReactJS 实战 —— 知其所以然：React原理解析》",
        comments: [{
            author: {firstName: "桑", lastName: "世龙"},
            body: "《NodeJS Web 框架演进实践》"
        }]
    };
    
    //就是下面这个helper提供了模版中的自定义标签;
    Handlebars.registerHelper('fullName', function(person) {
        return person.firstName + " " + person.lastName;
    });
    
    var source   = $("#entry-template5").html();
    var template = Handlebars.compile(source);
    var html    = template(context);
    document.getElementById("div5").innerHTML = html;
</script>