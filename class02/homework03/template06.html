<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
<script src="http://cdn.madebyglutard.com/libs/handlebars.js/2.0.0/handlebars.js"></script>

<div id="div6"></div>
<script id="entry-template6" type="text/x-handlebars-template">    
    <ul>
        {{#each items}}
            <li>{{agree_button}}</li>
        {{/each}}
    </ul>
</script>
<script>
    var context = {
        items: [
            {name: "Handlebars", emotion: "love"},
            {name: "Mustache", emotion: "enjoy"},
            {name: "Ember", emotion: "want to learn"}
        ]
    };

    Handlebars.registerHelper('agree_button', function() {
        var emotion = Handlebars.escapeExpression(this.emotion),
        name = Handlebars.escapeExpression(this.name);

        return new Handlebars.SafeString(
            "<button>I agree. I " + emotion + " " + name + "</button>"
        );
    });
    
    var source = $("#entry-template6").html();
    var template = Handlebars.compile(source);
    var html = template(context);
    document.getElementById("div6").innerHTML = html;
</script>